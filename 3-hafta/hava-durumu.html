<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hava Durumu</title>
    <style>
        body { background: #e3f0ff; font-family: Arial, sans-serif; }
        .weather-container {
            background: #fff;
            max-width: 350px;
            margin: 60px auto;
            padding: 2rem 1.5rem;
            border-radius: 12px;
            box-shadow: 0 4px 24px rgba(102,166,255,0.13);
            text-align: center;
        }
        input, button {
            padding: 0.6rem 1rem;
            border-radius: 6px;
            border: 1px solid #b3d1f7;
            margin-bottom: 1rem;
            font-size: 1rem;
        }
        button { background: #66a6ff; color: #fff; border: none; cursor: pointer; }
        button:hover { background: #007bff; }
        .result { margin-top: 1.2rem; font-size: 1.1rem; }
        .icon { font-size: 2.5rem; margin-bottom: 0.5rem; }
    </style>
</head>
<body>
    <div class="weather-container">
        <h2>Hava Durumu</h2>
        <select id="country" style="width:100%;margin-bottom:1rem;">
            <option value="">Ãœlke seÃ§in</option>
            <option value="TR">TÃ¼rkiye</option>
            <option value="US">ABD</option>
            <option value="DE">Almanya</option>
            <option value="FR">Fransa</option>
            <option value="GB">Ä°ngiltere</option>
        </select>
        <select id="city" style="width:100%;margin-bottom:1rem;" disabled>
            <option value="">Ã–nce Ã¼lke seÃ§in</option>
        </select>
        <button onclick="getWeather()">Sorgula</button>
        <div class="result" id="result"></div>
    </div>
    <script>
    // Ãœlke-ÅŸehir eÅŸlemesi (Ã¶rnekler)
    const cityData = {
        TR: ["Ä°stanbul", "Ankara", "Ä°zmir", "Bursa", "Antalya", "Adana", "Konya", "Gaziantep", "Kayseri", "EskiÅŸehir"],
        US: ["New York", "Los Angeles", "Chicago", "Houston", "Miami", "San Francisco", "Boston", "Seattle", "Dallas", "Washington"],
        DE: ["Berlin", "Hamburg", "MÃ¼nih", "KÃ¶ln", "Frankfurt", "Stuttgart", "DÃ¼sseldorf", "Dortmund", "Essen", "Leipzig"],
        FR: ["Paris", "Marsilya", "Lyon", "Toulouse", "Nice", "Nantes", "Strazburg", "Montpellier", "Bordeaux", "Lille"],
        GB: ["Londra", "Manchester", "Birmingham", "Liverpool", "Leeds", "Sheffield", "Bristol", "Newcastle", "Nottingham", "Leicester"]
    };

    const countrySelect = document.getElementById('country');
    const citySelect = document.getElementById('city');
    countrySelect.addEventListener('change', function() {
        const val = this.value;
        citySelect.innerHTML = '';
        if (!val || !cityData[val]) {
            citySelect.innerHTML = '<option value="">Ã–nce Ã¼lke seÃ§in</option>';
            citySelect.disabled = true;
            return;
        }
        citySelect.disabled = false;
        citySelect.innerHTML = '<option value="">Åehir seÃ§in</option>' + cityData[val].map(c => `<option value="${c}">${c}</option>`).join('');
    });

    async function getWeather() {
        const country = countrySelect.value;
        const city = citySelect.value;
        const result = document.getElementById('result');
        if (!country || !city) {
            result.innerHTML = 'LÃ¼tfen Ã¼lke ve ÅŸehir seÃ§in.';
            return;
        }
        result.innerHTML = 'YÃ¼kleniyor...';
        try {
            // Open-Meteo API (Ã¼cretsiz, anahtar gerekmez)
            const geo = await fetch(`https://geocoding-api.open-meteo.com/v1/search?name=${encodeURIComponent(city)}&count=1&language=tr&format=json&country=${country}`);
            const geoData = await geo.json();
            if (!geoData.results || geoData.results.length === 0) {
                result.innerHTML = 'Åehir bulunamadÄ±.';
                return;
            }
            const { latitude, longitude, name, country: countryName } = geoData.results[0];
            const weather = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${latitude}&longitude=${longitude}&current_weather=true&timezone=auto`);
            const weatherData = await weather.json();
            if (!weatherData.current_weather) {
                result.innerHTML = 'Hava durumu alÄ±namadÄ±.';
                return;
            }
            const w = weatherData.current_weather;
            const icons = {
                0: 'â˜€ï¸', 1: 'ğŸŒ¤ï¸', 2: 'â›…', 3: 'â˜ï¸', 45: 'ğŸŒ«ï¸', 48: 'ğŸŒ«ï¸', 51: 'ğŸŒ¦ï¸', 53: 'ğŸŒ¦ï¸', 55: 'ğŸŒ¦ï¸', 61: 'ğŸŒ§ï¸', 63: 'ğŸŒ§ï¸', 65: 'ğŸŒ§ï¸', 71: 'ğŸŒ¨ï¸', 73: 'ğŸŒ¨ï¸', 75: 'ğŸŒ¨ï¸', 80: 'ğŸŒ¦ï¸', 81: 'ğŸŒ¦ï¸', 82: 'ğŸŒ¦ï¸', 95: 'â›ˆï¸', 96: 'â›ˆï¸', 99: 'â›ˆï¸'
            };
            result.innerHTML = `<div class="icon">${icons[w.weathercode] || 'â“'}</div>
                <b>${name}, ${countryName}</b><br>
                SÄ±caklÄ±k: <b>${w.temperature}Â°C</b><br>
                RÃ¼zgar: ${w.windspeed} km/s<br>
                Durum: ${weatherDesc(w.weathercode)}`;
        } catch (err) {
            result.innerHTML = 'Bir hata oluÅŸtu.';
        }
    }
    function weatherDesc(code) {
        const map = {
            0: 'AÃ§Ä±k', 1: 'Az Bulutlu', 2: 'ParÃ§alÄ± Bulutlu', 3: 'KapalÄ±',
            45: 'Sisli', 48: 'Sisli', 51: 'Ã‡iseli', 53: 'Ã‡iseli', 55: 'Ã‡iseli',
            61: 'Hafif YaÄŸmurlu', 63: 'YaÄŸmurlu', 65: 'Kuvvetli YaÄŸmurlu',
            71: 'Hafif KarlÄ±', 73: 'KarlÄ±', 75: 'YoÄŸun Kar',
            80: 'SaÄŸanak', 81: 'Kuvvetli SaÄŸanak', 82: 'Åiddetli SaÄŸanak',
            95: 'FÄ±rtÄ±na', 96: 'FÄ±rtÄ±na', 99: 'FÄ±rtÄ±na'
        };
        return map[code] || 'Bilinmiyor';
    }
    </script>
</body>
</html>
